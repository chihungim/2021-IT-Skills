package view;

import java.awt.Image;
import java.awt.Toolkit;
import java.sql.SQLException;

import javax.swing.ImageIcon;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class Ride_apply_edit extends BaseFrame {

	static final int EDIT = 0, APPLY = 1;
	int mode, x, y;
	String title, floor, name;
	Ride r;
	JTextField txt[] = { new JTextField(), new JTextField(), new JTextField(), new JTextField() };
	JComboBox box[] = { new JComboBox(), new JComboBox() };
	JComponent comp[] = { txt[0], txt[1], txt[2], box[0], box[1], txt[3] };
	JLabel lbl_img;

	public Ride_apply_edit(int mode, String title, String floor, Ride r) {
		super("놀이기구 " + (mode == EDIT ? "수정" : "등록"), 800, 350);
		this.mode = mode;
		this.floor = floor;
		this.name = title;
		this.r = r;
		ui();
		data();
		setVisible(true);
	}

	private void data() {
		if (mode == EDIT) {
			var rno = getOne("SELECT r_no FROM adventure.ride where r_name like '%" + name + "%'");
			try {
				var rs = stmt.executeQuery("select r_img from ride where r_no = '" + rno + "'");
				if (rs.next()) {
					lbl_img.setIcon(new ImageIcon(Toolkit.getDefaultToolkit().createImage(rs.getBytes(1))
							.getScaledInstance(200, 200, Image.SCALE_SMOOTH)));
				}
			} catch (SQLException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			txt[0].setText(name);
			txt[2].setText(getOne("select r_max from ride where r_name = '" + name + "'"));
			txt[3].setText(getOne("select r_money from ride where r_name = '" + name + "'"));
			var info = getOne("select r_explation from ride where r_name = '" + name + "'");
			area.setText(info.split("#")[0]);
			x = val(info.split("#")[1]);
			y = val(info.split("#")[2]);

			icon = lbl_img.getIcon();
			for (int i = 0; i < txt.length; i++) {
				list.add(txt[i].getText());
			}
			for (int i = 0; i < box.length; i++) {
				list.add(box[i].getSelectedItem().toString());
			}
			list.add(area.getText());
		}
	}

	private void ui() {
		// TODO Auto-generated method stub

	}
}
