package view;

import java.awt.CardLayout;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;

import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JPanel;

import view.BaseFrame.IconLabel;

public class Ride extends BaseFrame {
	String floor[] = "1F,2F,3F,4F,외부".split(",");
	JComboBox<String> combo = new JComboBox<String>();
	JLabel lbl_img[] = new JLabel[5];
	CardLayout card = new CardLayout();
	HashMap<String, ArrayList<String>> ride = new HashMap<String, ArrayList<String>>();
	int point[][][];
	IconLabel iconlbl[][];
	JPanel c = new JPanel(card);

	public Ride() {
		super("놀이기구 등록/수정", 1250, 650);
		data();
		ui();
		events();
		setVisible(true);
	}

	void ui() {

	}

	void events() {

	}

	void data() {
		combo.setModel(new DefaultComboBoxModel<>(floor));
		point = new int[floor.length][][];
		iconlbl = new IconLabel[point.length][];

		for (int i = 0; i < floor.length; i++) {
			ride.put(floor[i], new ArrayList<String>());
		}

		try {
			var rs = stmt.executeQuery("select * from ride");
			while (rs.next()) {
				ride.get(rs.getString(3)).add(rs.getString(2));
			}
		} catch (SQLException e1) {
			e1.printStackTrace();
		}

		for (int i = 0; i < floor.length; i++) {
			point[i] = new int[ride.get(floor[i]).size()][2];
			try {
				var rs = stmt.executeQuery("SELECT r_explation from ride where r_floor = '" + floor[i] + "'");
				int idx = 0;
				while (rs.next()) {
					point[i][idx][0] = val(rs.getString(1).split("#")[1]);
					point[i][idx][1] = val(rs.getString(1).split("#")[2]);
					idx++;
				}
			} catch (SQLException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}

		for (int i = 0; i < point.length; i++) {
			iconlbl[i] = new IconLabel[point[i].length];
			for (int j = 0; j < point[i].length; j++) {
				iconlbl[i][j] = new IconLabel(ride.get(floor[i]).get(j), floor[i]);
				iconlbl[i][j].setBounds(point[i][j][0] - 25, point[i][j][1] - 50, 50, 50);
			}
		}
	}

}
