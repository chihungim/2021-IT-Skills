package view;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.sql.SQLException;
import java.text.DecimalFormat;

import javax.swing.JComponent;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

public class Reserve extends BaseFrame {

	DefaultTableModel m = new DefaultTableModel(null, ",번호,기구명,층수,탑승인원,키제한,나이 제한,금액,기구설명".split(",")) {
		public boolean isCellEditable(int row, int column) {
			return column == 0;
		};

		public java.lang.Class<?> getColumnClass(int columnIndex) {
			return getValueAt(0, columnIndex).getClass();
		};
	};

	JTable t = new JTable(m) {
		public java.awt.Component prepareRenderer(javax.swing.table.TableCellRenderer renderer, int row, int column) {
			var comp = (JComponent) super.prepareRenderer(renderer, row, column);
			if (t.getSelectedRow() == row) {
				comp.setBackground(Color.YELLOW);
			} else {
				comp.setBackground(Color.WHITE);
			}

			return comp;
		}
	};

	DefaultTableCellRenderer dtcr = new DefaultTableCellRenderer();
	JTextField txt = new JTextField();
	DecimalFormat df = new DecimalFormat("#,##0");
	int sum = 0;

	public Reserve() {
		super("예매", 650, 500);
		data();
		setVisible(true);
	}

	void ui() {
		var n = new JPanel(new FlowLayout(2));
		var c = new JPanel(new BorderLayout());
		var s = new JPanel(new FlowLayout(2));
	}

	void data() {
		try {
			var rs = stmt.executeQuery("select * from ride");
			while (rs.next()) {
				if ((uheight >= val(rs.getString("r_height")) && uold >= val(rs.getString("r_old"))
						&& !(val(rs.getString("r_disable")) == 1 && udisable == 1))) {
					Object row[] = new Object[m.getColumnCount()];
					row[0] = false;
					for (int i = 1; i < m.getColumnCount(); i++) {
						t.getColumnModel().getColumn(i).setCellRenderer(dtcr);
						row[i] = rs.getString(i);
					}
					row[row.length - 1] = rs.getString("r_explation");
					m.addRow(row);
				}
			}
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	void btn_event() {

	}

}
